- name: Deploy ic-webapp project
  hosts: aws_vm
  become: true
  # vars:
  #   network: "network_test_2"

  # pre_tasks:
   
  #   - name: check if external network exists
  #     command: docker network inspect "{{ network }}"
  #     register: network_check
  #     ignore_errors: true
  #     changed_when: false

  #   - name: Create external network if it does not exist
  #     when: network_check.rc != 0
  #     docker_network:
  #       name: "{{ network }}"
  #       driver: bridge
  #       attachable: true
  #       state: present


  roles:
    - docker_role
    - odoo_role
    - pgadmin_role
    - ic_webapp_role
    
    

  post_tasks:
    - name: Deployment completed successfully!
      debug:
        msg: "All services deployed and started successfully!"


