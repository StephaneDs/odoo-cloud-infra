services:
  web:
    image: {{ odoo_image }}
    container_name: {{ odoo_container_name }}
    depends_on:
      - db
    ports:
      - "{{ odoo_service_port }}:8069"
    volumes:
      - {{ odoo_web_volume }}:{{ odoo_web_data }}
      - {{ odoo_config_volume }}:{{ odoo_web_conf }}
      - {{ odoo_addons_volume }}:{{ odoo_web_addon }}
    environment:
      - HOST= {{ odoo_db_container_name }}
      - USER= {{ odoo_db_user }}
      - DB= {{ odoo_db_name }}    
      - PASSWORD= {{ odoo_db_password }}
      
    networks:
      - {{ network }}
  db:
    image: {{ odoo_db_image }}
    container_name: {{ odoo_db_container_name }}
    environment:
      - POSTGRES_DB= {{ odoo_db_name }}
      - POSTGRES_PASSWORD= {{ odoo_db_password }}
      - POSTGRES_USER= {{ odoo_db_user }}
      - PGDATA= {{ odoo_db_pgdata }} 
    volumes:
      - {{ odoo_db_volume }}:{{ odoo_db_pgdata }}
    networks:
      - {{ network }}

volumes:
  odoo-web-data:
    name: {{ odoo_web_volume}}
  odoo-db-data:
    name: {{ odoo_db_volume }}
  odoo-config-data:
    name: {{ odoo_config_volume }}
  odoo-addons-data:
    name: {{ odoo_addons_volume }}
  

networks:
  {{ network }}:
    name: {{ network }}
    external: true

